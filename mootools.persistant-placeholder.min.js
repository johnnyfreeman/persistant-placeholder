var persistantPlaceholder=new Class({Implements:Options,options:{labelSelector:"label",labelRelation:"sibling",position:{relativeTo:this.field,position:"upperLeft",edge:"upperLeft"}},field:null,label:null,placeholder:null,initialize:function(a,b){this.init(a,b)},init:function(a,b){this.setOptions(b);this.field=a;switch(this.options.labelRelation){case "sibling":this.label=this.field.getSiblings(this.options.labelSelector).pick();break;case "parent":this.label=this.field.getParents(this.options.labelSelector).pick()}if(null!== this.label){if(this.label.get("text").length)this.placeholder=this.label.get("text");this.label.hide()}if(null!==this.field.getProperty("placeholder")&&this.field.getProperty("placeholder").length)this.placeholder=this.field.getProperty("placeholder"),this.field.removeProperty("placeholder");var c=this.field.getProperty("id")||String.uniqueID();this.field.setProperty("id",c);this.label=(new Element("label",{"class":"placeholder_label","for":c,html:this.placeholder})).inject(this.field.getParent()).position({relativeTo:this.field, position:"upperLeft",edge:"upperLeft"});this.field.addEvents({blur:this.blurHandler.bind(this),focus:this.focusHandler.bind(this),keypress:this.keypressHandler.bind(this),keyup:this.keyupHandler.bind(this)});this.blurHandler()},keypressHandler:function(){this.field.getProperty("value").length||this.label.hide()},keyupHandler:function(){this.field.getProperty("value").length||(this.label.show(),this.dimLabel())},blurHandler:function(){this.undimLabel();this.field.getProperty("value").length?this.label.hide(): this.label.show()},focusHandler:function(){this.dimLabel()},dimLabel:function(){this.label.addClass("dim")},undimLabel:function(){this.label.removeClass("dim")}});Elements.implement({persistantPlaceholder:function(a){return this.each(function(b){return new persistantPlaceholder(b,a)})}});Element.implement({persistantPlaceholder:function(a){return new persistantPlaceholder(this,a)}});